import socket
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
result = sock.connect_ex(('opcrcmdbtst', 1605))
print('Connection Result  >> ' , result)
#  msg = sock.recv(1024)

send_msg= bytearray ([0x00, 0x57, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 
0x01, 0x3a, 0x01, 0x2c, 0x00, 0x00, 0x20, 0x00, 
0x7f, 0xff, 0xc6, 0x0e, 0x00, 0x00, 0x01, 0x00, 
0x00, 0x1d, 0x00, 0x3a, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x28, 0x43, 0x4f, 0x4e, 0x4e, 0x45, 
0x43, 0x54, 0x5f, 0x44, 0x41, 0x54, 0x41, 0x3d, 
0x28, 0x43, 0x4f, 0x4d, 0x4d, 0x41, 0x4e, 0x44, 
0x3d, 0x70, 0x69, 0x6e, 0x67, 0x29, 0x29 ] )

sock.send(send_msg)
msg = sock.recv(2048)
sock.close()
if 'ERR=0' in msg.decode('ascii'):
    print ('Oracle Listener listens this port')
    print('Listener Name, Guess SID ',msg.decode('ascii')[msg.decode('ascii').find("ALIAS=")+6:-2])
    print('')
    print('FULL RETURNED MESSAGE')
    print ('Received  >> ',msg )
 

